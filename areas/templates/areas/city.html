{% extends 'base.html' %}
{% load area_filters %}

{% block body %}


<div class="title">
  <h2 class="text-uppercase display-4">{{ city.name }}, {{ city.state.abbrv }} <img src="http://openweathermap.org/img/w/{{ city_weather.icon }}.png"> </h2>
  <h3 class="display-5">Local time: {{ datetime }}</h3>
</div>
<div class="row">
  <div class="col">
    <div class="weather">
      <h3>Today's weather </h3>
      <p clas="font-weight-bold">
        {{ city_weather.temperature }}&#186; F
      </p>
      <p class="text-capitalize">
        {{ city_weather.humidity }}
        {{ city_weather.description}}
      </p>
    </div>
    <div class="video-player" width="300px" style="overflow:inherit">
      <iframe class="video" width="100%" height="400px" src="" frameBorder="0" allow="autoplay" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    </div>
  </div>

  <div class="col">
    {% for video in videos %}
      <div class="card video-card text-center p-3 border-light">
        <img class="card-img-top mx-auto" style="width:295px; height:166px;" src="{{ video.picture }}" />
        <div class="card-body">
          <h5 class="card-title">{{ video.name }}</h5>
          <p class="card-text">
            {{ video.description|truncatechars:300 }}
          </p>
          <span class="video-author">by <strong> {{ video.user }} </strong></span>
          <div class="embed" style="display:none;">
              {{ video.embed | safe }}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

</div>

{% block script %}
  {% load static %}
   <script type="text/javascript">
     $('document').ready(function(){
       $('.video-card').click(function(){
         var embed = $('iframe', this).attr('src');
         var htmlEmbed = embed + "&autoplay=1"
         $('.video').attr('src', htmlEmbed);
         console.log(htmlEmbed);

        $(this).find('.card-title').css({'background-color':'pink'});

       });
     });
   </script>
<!--   <script src="{% static 'areas/script.js'%}"></script> -->
{% endblock %}


{% endblock %}

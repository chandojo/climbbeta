{% extends 'base.html' %}
{% load area_filters %}

{% block body %}



<div class="row">
  <div class="col">
    <div class="title">
      <h2 class="text-uppercase display-4">{{ city.name }}, {{ city.state.abbrv }}  </h2>
      <h5>Local time: {{ datetime }}</h5>
    </div>
    <button type="button" class="todays-weather btn btn-secondary btn-lg btn-block rounded-0">Today's weather: {{ city_weather.main }} <img src="http://openweathermap.org/img/w/{{ city_weather.icon }}.png"></button>
  <div class="weather">
      <table class="table current-weather">
        <thead>
          <tr class="bg-warning">
            <th scope="col">Temperature</th>
            <th scope="col">Description</th>
            <th scope="col">Humidity</th>
            <th scope="col">Wind</th>
            <th scope="col">Pressure</th>
          </tr>
        </thead>
        <tbody>
          <tr class="table-warning">
            <td>{{ city_weather.temperature }}&#186; F</td>
            <td class="text-capitalize">{{ city_weather.description }}</td>
            <td>{{ city_weather.humidity }}% </td>
            <td>{{ city_weather.wind }} m/h</td>
            <td>{{ city_weather.pressure }} hpa </td>
          </tr>

        </tbody>
      </table>

    </div>
    <button type="button" class="five-day btn btn-light btn-lg btn-block rounded-0">5-Day Forecast</button>

    <div class="weather-forecast hidden">
      <table class="table">
          {% for day, hour in forecast.items %}
          <tr class="table-secondary">
            <td colspan="3">
              {{ day|day_converter }}
            </td>
          </tr>
          {% for temp in hour %}
          <tr>
            <td>{{ temp.dt|time_converter }}</td>
            <td>{{ temp.temp }}&#186; F <img src="http://openweathermap.org/img/w/{{ temp.icon }}.png"></td>
            <td class="text-capitalize">{{ temp.desc }}</td>
          </tr>
          {% endfor %}
         {% endfor %}
      </table>
    </div>

    <button type="button" class="map-embed btn btn-light btn-lg btn-block rounded-0">City Map</button>
    <div class="city-map hidden">
      {{ map | safe }}
    </div>
  </div>

  <div class="col">
    <div class="video-player" style="width:100%; height:300px; overflow:inherit; background-color: black;">
      <iframe class="video" width="100%" height="100%" src="" frameBorder="0" allow="autoplay" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    </div>
    <hr>
    <div class="text-center">
      <span class="text-uppercase">Videos</span>
      <button type="button" class="btn btn-success play-all"><i class="fas fa-play"></i> All</button>
    </div>

    <hr>
    <div class="video-results" style="height:500px; overflow:scroll;">
      {% for video in videos.data %}
        <div class="card video-card pointer text-center p-3 border-light">
          <div class="img" style="max-height:300px; overflow:hidden;">
            <img class="card-img-top mx-auto" src="{{ video.pictures.sizes.3.link }}" />
          </div>
          <div class="card-body">
            <h5 class="card-title">{{ video.name }}</h5>
            <span class="video-author">by <strong> {{ video.user.name }} </strong></span>
            <div class="embed" style="display:none;">
                {{ video.embed | safe }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

</div>

{% endblock %}

{% block script %}
  {% load static %}
  <script src="{% static 'areas/js/script.js' %}"></script>
{% endblock %}
